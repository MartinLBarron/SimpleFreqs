---
title: "Basic Use"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Basic Use}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = ""
)
```

```{r setup}
library(simplefreqs)
```

## printing
This package provides a simple way to produce frequency tables.  It is built to
work both in the console and in knitted documents (i.e. in Rmarkdown or Quarto).
It should correctly produce html, pdf, and word output.

### Console

```{r console}
freq(iris, Species, markdown = F, plot = F)
```

### html

```{r html}
freq(iris, Species, markdown = T)
```

### pdf

```{r pdf}
freq(iris, Species, markdown = T)
```

### word

```{r word}
freq(iris, Species, markdown = T)
```

It is designed to be used as part of a tidyverse pipeline. 

```{r tidyverse, message=F, error=F, warning=F}
library(dplyr)
```

Hence, the first parameter
should be a data frame (or tibble) and the second parameter an unquoted variable from
the first parameter.

```{r basic}
freq(iris, Species)
```

or 

```{r basic2}
iris |>
  freq(Species)
```

Alternatively, you can pass a vector as the first parameter and that will work too.

```{r vector}
freq(iris$Species)
```

or

```{r vector2}
freq(iris[["Species"]])
```

Results need not be printed at all. Instead, the results can be assigned to a 
variable.  This will have a class of both "simplefreqs_freq" and "data.frame".

```{r assigning}
df <- freq(iris, Species)

class(df)
```

This object will continue to print as a simplefreqs_freqs.

```{r assigning2}
df <- freq(iris, Species)

df
```

You can remove the "simplefreqs_freq" class if needed and the object will print 
as a regular data.frame.

```{r assigning3}
df <- freq(iris, Species)

df <- as.data.frame(df)

class(df)
df
```

# plots
By default, a simple bar chart is produced alongside the frequency table.

```{r plots1}
freq(iris, Species)
```

Plots can be optionally supressed
```{r plots2}
freq(iris, Species, plot = FALSE)
```

#sort
By default, a results are sorted in descending order by the frequency of values

```{r sort1}
freq(iris, Species, sort = TRUE, plot = FALSE)
```

Alternatively, sorting can be turned off. In that case, results will be sorted by 
the variables labels. For character variables, it will be alphabetic, for factors
it will be by the specified levels of the variable.

```{r sort2}
freq(iris, Species, sort = FALSE, plot = FALSE)
```

# na.rm

NAs are, by default, included and treated as any other level of the variable.

```{r nas1}
df <- iris |>
  mutate(Species=ifelse(row_number()<10,NA,Species)) |>
    freq(Species, na.rm = FALSE)
df
```

Alternatively, nas can be removed. In that case, NAs will not be printed but two
relevent attribute will be set on the results. "missing" will include the number
of missings removed and missing_removed will be set to TRUE.

```{r nas2}

df <- iris |>
  mutate(Species=ifelse(row_number()<10,NA,Species)) |>
    freq(Species, na.rm = TRUE)
df
```

#markdown

simplefreqs::freq tries to intuit if you are working interactively on the console 
or are knitting a document. In some cases, you may need to directly specify the 
type of output you want to display using the `markdown=` parameter.  Set to `FALSE`
when you wish to print for the console.

```{r mkdown1}
freq(iris, Species, markdown = FALSE)
```

Set to `markdown = TRUE` when you wish to include in a knitted document.

```{r mkdown2}
freq(iris, Species, markdown = TRUE)
```

#wt
Results can be optionally weighted by providing a vector of weight values.

```{r wt1}
freq(iris, Species,wt=Sepal.Length)

```



